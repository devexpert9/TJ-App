{"version":3,"file":"ngx-stars.umd.js.map","sources":["ng://ngx-stars/lib/ngx-stars.component.ts","ng://ngx-stars/lib/ngx-stars.module.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'ngx-stars',\n  template: `<link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\">\n\n<div class=\"stars-line\" (mouseleave)=\"readonly ? noop() : onStarsUnhover()\">\n  <i [ngClass]=\"['fa fa-star ' + starSize()]\" class=\"zero-star\" aria-hidden=\"true\" (click)=\"onZeroStarClick()\" (mousemove)=\"readonly ? noop() : onZeroStarHover()\"></i>\n  <div *ngFor=\"let star of editableStars;\" (click)=\"readonly ? noop() : onStarClick($event, star)\" (mousemove)=\"readonly ? noop() : onStarHover($event, star)\">\n    <i [ngClass]=\"['fa ' + starSize(), star.classname]\" [ngStyle]=\"starColorAndPadding()\" aria-hidden=\"true\"></i>\n  </div>\n</div>\n`,\n  styles: [`i:not(.zero-star){color:#b42025}.stars-line{display:flex;align-items:center;position:relative}.stars-line>div{z-index:999}.zero-star{color:transparent;position:absolute;left:-16px}`],\n})\nexport class NgxStarsComponent implements OnInit {\n\n  @Input()\n  maxStars: number = 5;\n\n  @Input()\n  initialStars: number = 0;\n\n  @Input()\n  readonly: boolean;\n\n  @Input()\n  size: number;\n\n  @Input()\n  color: string;\n\n  @Input()\n  animation: boolean;\n\n  @Input()\n  animationSpeed: number = 100;\n\n  @Input()\n  customPadding: string;\n\n  @Input()\n  wholeStars: boolean = false;\n\n  @Output()\n  ratingOutput: EventEmitter<number> = new EventEmitter();\n\n  rating: number;\n  editableStars: EditableStar[];\n  animationInterval: any;\n  animationRunning: boolean;\n\n  ngOnInit(): void {\n    this.editableStars = Array.from(new Array(this.maxStars)).map((elem, index) => new EditableStar(index));\n    this.setRating(this.initialStars);\n\n    if (this.animation) {\n      this.animationInterval = setInterval(this.starAnimation.bind(this), this.animationSpeed);\n    }\n  }\n\n  starColorAndPadding(): Object {\n    return Object.assign({}, this.starColor(), this.starPadding());\n  }\n\n  private starColor(): Object {\n    return { color: this.color || 'crimson' };\n  }\n\n  private starPadding(): Object {\n    let padding = '0.5rem';\n    if (Number.isInteger(this.size) || this.size > 0 || this.size < 6) {\n      padding = `0.${this.size}rem`;\n    }\n\n    return { 'margin-right': this.customPadding || padding };\n  }\n\n  starSize(): string {\n    if (!Number.isInteger(this.size) || this.size < 2 || this.size > 5) {\n      return '';\n    }\n    return `fa-${this.size}x`;\n  }\n\n  starAnimation(): void {\n    this.animationRunning = true;\n    if (this.rating < this.maxStars) {\n      this.setRating(this.rating += 0.5);\n    }\n    else {\n      this.setRating(0);\n    }\n  }\n\n  cancelStarAnimation(): void {\n    if (this.animationRunning) {\n      clearInterval(this.animationInterval);\n      this.rating = 0;\n      this.animationRunning = false;\n    }\n  }\n\n  setRating(rating: number) {\n    this.rating = Math.round(rating * 2) / 2;\n    this.onStarsUnhover();\n  }\n\n  onStarHover(event: MouseEvent, clickedStar: EditableStar): void {\n    this.cancelStarAnimation();\n\n    const clickedInFirstHalf = this.clickedInFirstHalf(event);\n\n    // fill in either a half or whole star depending on where user clicked\n    clickedStar.classname = (!this.wholeStars && clickedInFirstHalf) ? 'fa-star-half-o' : 'fa-star';\n\n    // fill in all stars in previous positions and clear all in later ones\n    this.editableStars.forEach(star => {\n      if (star.position > clickedStar.position) {\n        star.classname = 'fa-star-o';\n      }\n      else if (star.position < clickedStar.position) {\n        star.classname = 'fa-star';\n      }\n    });\n  }\n\n  onStarClick(event: MouseEvent, clickedStar: EditableStar): void {\n    this.cancelStarAnimation();\n\n    // lock in current rating\n    const clickedInFirstHalf = this.clickedInFirstHalf(event);\n    this.rating = clickedStar.position + ((!this.wholeStars && clickedInFirstHalf) ? 0.5 : 1);\n    this.ratingOutput.emit(this.rating);\n  }\n\n  // hidden star to left of first star lets user click there to set to 0\n  onZeroStarClick(): void {\n    this.setRating(0);\n    this.ratingOutput.emit(this.rating);\n  }\n\n  onZeroStarHover(): void {\n    // clear all stars\n    this.editableStars.forEach(star => star.classname = 'fa-star-o');\n  }\n\n  onStarsUnhover() {\n    // when user stops hovering we want to make stars reflect the last rating applied by clicking\n    this.editableStars.forEach(star => {\n      const starNumber = star.position + 1;\n      if (this.rating >= starNumber) {\n        star.classname = 'fa-star';\n      }\n      else if (this.rating > starNumber - 1 && this.rating < starNumber) {\n        star.classname = 'fa-star-half-o';\n      }\n      else {\n        star.classname = 'fa-star-o';\n      }\n    });\n  }\n\n  private clickedInFirstHalf(event: MouseEvent): boolean {\n    const starIcon = event.target as HTMLElement;\n    return event.pageX < starIcon.getBoundingClientRect().left + starIcon.offsetWidth / 2;\n  }\n\n  noop(): void {}\n}\n\nexport class EditableStar {\n  position: number;\n  classname: string;\n\n  constructor(position: number) {\n    this.position = position;\n    this.classname = 'fa-star-o';\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgxStarsComponent } from './ngx-stars.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    NgxStarsComponent\n  ],\n  exports: [\n    NgxStarsComponent\n  ]\n})\nexport class NgxStarsModule { }\n"],"names":["EventEmitter","Component","Input","Output","NgModule","CommonModule"],"mappings":";;;;;;;;;;AAAA;;YAiBE,gBACmB,CAAC,CAAC;YAErB,oBACuB,CAAC,CAAC;YAczB,sBACyB,GAAG,CAAC;YAK7B,kBACsB,KAAK,CAAC;YAE5B,oBACqC,IAAIA,iBAAY,EAAE,CAAC;;;;;QAOxD,oCAAQ;;;YAAR;gBACE,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,KAAK,IAAK,OAAA,IAAI,YAAY,CAAC,KAAK,CAAC,GAAA,CAAC,CAAC;gBACxG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAElC,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,IAAI,CAAC,iBAAiB,GAAG,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;iBAC1F;aACF;;;;QAED,+CAAmB;;;YAAnB;gBACE,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;aAChE;;;;QAEO,qCAAS;;;;gBACf,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,SAAS,EAAE,CAAC;;;;;QAGpC,uCAAW;;;;;gBACjB,IAAI,OAAO,GAAG,QAAQ,CAAC;gBACvB,IAAI,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE;oBACjE,OAAO,GAAG,OAAK,IAAI,CAAC,IAAI,QAAK,CAAC;iBAC/B;gBAED,OAAO,EAAE,cAAc,EAAE,IAAI,CAAC,aAAa,IAAI,OAAO,EAAE,CAAC;;;;;QAG3D,oCAAQ;;;YAAR;gBACE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE;oBAClE,OAAO,EAAE,CAAC;iBACX;gBACD,OAAO,QAAM,IAAI,CAAC,IAAI,MAAG,CAAC;aAC3B;;;;QAED,yCAAa;;;YAAb;gBACE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAC7B,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE;oBAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;iBACpC;qBACI;oBACH,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;iBACnB;aACF;;;;QAED,+CAAmB;;;YAAnB;gBACE,IAAI,IAAI,CAAC,gBAAgB,EAAE;oBACzB,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;oBACtC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;oBAChB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;iBAC/B;aACF;;;;;QAED,qCAAS;;;;YAAT,UAAU,MAAc;gBACtB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACzC,IAAI,CAAC,cAAc,EAAE,CAAC;aACvB;;;;;;QAED,uCAAW;;;;;YAAX,UAAY,KAAiB,EAAE,WAAyB;gBACtD,IAAI,CAAC,mBAAmB,EAAE,CAAC;;gBAE3B,IAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;;gBAG1D,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,kBAAkB,IAAI,gBAAgB,GAAG,SAAS,CAAC;;gBAGhG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,UAAA,IAAI;oBAC7B,IAAI,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,EAAE;wBACxC,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;qBAC9B;yBACI,IAAI,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,EAAE;wBAC7C,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;qBAC5B;iBACF,CAAC,CAAC;aACJ;;;;;;QAED,uCAAW;;;;;YAAX,UAAY,KAAiB,EAAE,WAAyB;gBACtD,IAAI,CAAC,mBAAmB,EAAE,CAAC;;gBAG3B,IAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBAC1D,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,kBAAkB,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC;gBAC1F,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACrC;;;;;QAGD,2CAAe;;;YAAf;gBACE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACrC;;;;QAED,2CAAe;;;YAAf;;gBAEE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,SAAS,GAAG,WAAW,GAAA,CAAC,CAAC;aAClE;;;;QAED,0CAAc;;;YAAd;gBAAA,iBAcC;;gBAZC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,UAAA,IAAI;;oBAC7B,IAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;oBACrC,IAAI,KAAI,CAAC,MAAM,IAAI,UAAU,EAAE;wBAC7B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;qBAC5B;yBACI,IAAI,KAAI,CAAC,MAAM,GAAG,UAAU,GAAG,CAAC,IAAI,KAAI,CAAC,MAAM,GAAG,UAAU,EAAE;wBACjE,IAAI,CAAC,SAAS,GAAG,gBAAgB,CAAC;qBACnC;yBACI;wBACH,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;qBAC9B;iBACF,CAAC,CAAC;aACJ;;;;;QAEO,8CAAkB;;;;sBAAC,KAAiB;;gBAC1C,IAAM,QAAQ,qBAAG,KAAK,CAAC,MAAqB,EAAC;gBAC7C,OAAO,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,qBAAqB,EAAE,CAAC,IAAI,GAAG,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC;;;;;QAGxF,gCAAI;;;YAAJ,eAAe;;oBAtKhBC,cAAS,SAAC;wBACT,QAAQ,EAAE,WAAW;wBACrB,QAAQ,EAAE,8qBAQX;wBACC,MAAM,EAAE,CAAC,sLAAsL,CAAC;qBACjM;;;+BAGEC,UAAK;mCAGLA,UAAK;+BAGLA,UAAK;2BAGLA,UAAK;4BAGLA,UAAK;gCAGLA,UAAK;qCAGLA,UAAK;oCAGLA,UAAK;iCAGLA,UAAK;mCAGLC,WAAM;;gCA5CT;;QA2KA;QAIE,sBAAY,QAAgB;YAC1B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;SAC9B;2BAlLH;QAmLC;;;;;;ACnLD;;;;oBAICC,aAAQ,SAAC;wBACR,OAAO,EAAE;4BACPC,mBAAY;yBACb;wBACD,YAAY,EAAE;4BACZ,iBAAiB;yBAClB;wBACD,OAAO,EAAE;4BACP,iBAAiB;yBAClB;qBACF;;6BAdD;;;;;;;;;;;;;;;;;;;;;;;;;"}
